(self.webpackChunk_taiga_ui_components=self.webpackChunk_taiga_ui_components||[]).push([[9897],{9897:n=>{n.exports="import {Component, Inject, ViewChild} from '@angular/core';\nimport {FormControl} from '@angular/forms';\nimport {changeDetection} from '@demo/emulate/change-detection';\nimport {encapsulation} from '@demo/emulate/encapsulation';\nimport {\n    TUI_DEFAULT_MATCHER,\n    TUI_WINDOW_SIZE,\n    tuiControlValue,\n    TuiSwipeDirection,\n} from '@taiga-ui/cdk';\nimport {TuiInputComponent} from '@taiga-ui/kit';\nimport {Observable} from 'rxjs';\nimport {map} from 'rxjs/operators';\n\nconst USERS = [\n    'John Doe',\n    'Jane Doe',\n    'John Smith',\n    'Jane Smith',\n    'John Johnson',\n    'Jane Johnson',\n    'John Williams',\n    'Jane Williams',\n    'John Brown',\n    'Jane Brown',\n    'John Davis',\n    'Jane Davis',\n    'John Miller',\n    'Jane Miller',\n    'John Wilson',\n    'Jane Wilson',\n];\n\n@Component({\n    selector: 'tui-sheet-dialog-example-4',\n    templateUrl: './index.html',\n    styleUrls: ['./index.less'],\n    encapsulation,\n    changeDetection,\n})\nexport class TuiSheetDialogExample4 {\n    @ViewChild(TuiInputComponent)\n    private readonly input?: TuiInputComponent;\n\n    open = false;\n\n    readonly offset = 16;\n\n    readonly search = new FormControl('');\n\n    readonly users$ = tuiControlValue<string>(this.search).pipe(\n        map(search => USERS.filter(user => TUI_DEFAULT_MATCHER(user, search))),\n    );\n\n    readonly height$ = this.size$.pipe(\n        map(({height}) => `calc(${height - this.offset}px - 14rem`),\n    );\n\n    constructor(\n        @Inject(TUI_WINDOW_SIZE) private readonly size$: Observable<ClientRect>,\n    ) {}\n\n    toggle(open: boolean): void {\n        this.open = open;\n\n        if (open) {\n            this.search.setValue('');\n        }\n    }\n\n    onSwipe(direction: TuiSwipeDirection): void {\n        if (direction === 'top') {\n            this.scroll();\n        }\n    }\n\n    onFocus(): void {\n        this.scroll();\n        this.input?.nativeFocusableElement?.focus();\n    }\n\n    private scroll(): void {\n        const input = this.input?.nativeFocusableElement;\n        const container = input?.closest('tui-sheet-dialog');\n\n        if (!container) {\n            return;\n        }\n\n        container.scrollTop = container.clientHeight;\n    }\n}\n"}}]);